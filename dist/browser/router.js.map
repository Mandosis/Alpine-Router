{"version":3,"sources":["webpack:///router.js","webpack:///webpack/bootstrap 0afe4a61567abf1d3380","webpack:///./src/router.ts"],"names":["AlpineRouter","modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","default","object","property","prototype","hasOwnProperty","p","s","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","length","descriptor","writable","key","protoProps","staticProps","Router","routes","_this","this","_routes","Array","isArray","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","route","push","err","return","console","error","_getWindowUrlAndNavigate","window","onhashchange","path","tokens","split","charAt","slice","url","sanitizePath","urlTokens","getPathTokens","urlMap","Map","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","token","set","result","_getRoutes","_changeBrowserUrl","_addTemplatesToDom","routeHistory","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","routeTokens","_compareTokens","consecutiveCount","_countConsecutiveTokens","isFullPathMatch","size","isPartialMatch","children","seen","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","it","tokenMap","count","isLastTokenAMatch","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","_baseHrefValue","location","pathname","substring","navigate","hash","finalPath","_getAndAppendBaseHref","history","pushState","baseHref","_this2","_loop","outlets","document","getElementsByTagName","template","innerHTML","_getRemoteTemplate","templateUrl","then","catch","Promise","resolve","reject","fetch","response","text","body","baseElement","attributes","getNamedItem"],"mappings":"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","file":"router.js","sourcesContent":["var AlpineRouter =\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"D:\\\\Chris\\\\Workspace\\\\alpine\\\\router\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Router = function () {\n    function Router(routes) {\n        var _this = this;\n\n        _classCallCheck(this, Router);\n\n        this._routes = [];\n        if (Array.isArray(routes)) {\n            var _iteratorNormalCompletion = true;\n            var _didIteratorError = false;\n            var _iteratorError = undefined;\n\n            try {\n                for (var _iterator = routes[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                    var route = _step.value;\n\n                    this._routes.push(route);\n                }\n            } catch (err) {\n                _didIteratorError = true;\n                _iteratorError = err;\n            } finally {\n                try {\n                    if (!_iteratorNormalCompletion && _iterator.return) {\n                        _iterator.return();\n                    }\n                } finally {\n                    if (_didIteratorError) {\n                        throw _iteratorError;\n                    }\n                }\n            }\n        } else {\n            console.error('Router: Failed to create router.\\nDid you enter an array of objects in the following format [{ path: \"example\", template: \"<h1>Example</h1>\"}]?');\n        }\n        this._getWindowUrlAndNavigate();\n        window.onhashchange = function () {\n            _this._getWindowUrlAndNavigate();\n        };\n    }\n\n    _createClass(Router, [{\n        key: 'getPathTokens',\n        value: function getPathTokens(path) {\n            var tokens = path.split('/');\n            if (tokens[0] === '' && tokens[1] === '') {\n                var token = path;\n                tokens = [''];\n            }\n            return tokens;\n        }\n    }, {\n        key: 'sanitizePath',\n        value: function sanitizePath(path) {\n            if (path.charAt(0) === '#') {\n                path = path.slice(1, path.length);\n            }\n            if (path.charAt(0) === '/' && path !== '/') {\n                path = path.slice(1, path.length);\n                ;\n            }\n            return path;\n        }\n    }, {\n        key: 'navigate',\n        value: function navigate(url) {\n            url = this.sanitizePath(url);\n            var urlTokens = this.getPathTokens(url);\n            var urlMap = new Map();\n            var _iteratorNormalCompletion2 = true;\n            var _didIteratorError2 = false;\n            var _iteratorError2 = undefined;\n\n            try {\n                for (var _iterator2 = urlTokens[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n                    var token = _step2.value;\n\n                    urlMap.set(token, false);\n                }\n            } catch (err) {\n                _didIteratorError2 = true;\n                _iteratorError2 = err;\n            } finally {\n                try {\n                    if (!_iteratorNormalCompletion2 && _iterator2.return) {\n                        _iterator2.return();\n                    }\n                } finally {\n                    if (_didIteratorError2) {\n                        throw _iteratorError2;\n                    }\n                }\n            }\n\n            var result = this._getRoutes(this._routes, urlTokens, urlMap);\n            if (result.length > 0) {\n                this._changeBrowserUrl(url);\n                this._addTemplatesToDom(result);\n                return true;\n            }\n            console.error('Router: No route found for path \\'' + url + '\\'.');\n            return false;\n        }\n    }, {\n        key: '_getRoutes',\n        value: function _getRoutes(routes, urlTokens, urlMap, routeHistory) {\n            routeHistory = routeHistory || [];\n            var _iteratorNormalCompletion3 = true;\n            var _didIteratorError3 = false;\n            var _iteratorError3 = undefined;\n\n            try {\n                for (var _iterator3 = routes[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n                    var route = _step3.value;\n\n                    var routeTokens = this.getPathTokens(route.path);\n                    urlMap = this._compareTokens(routeTokens, urlTokens, urlMap);\n                    var consecutiveCount = this._countConsecutiveTokens(urlMap);\n                    var isFullPathMatch = consecutiveCount === urlMap.size;\n                    var isPartialMatch = consecutiveCount < urlMap.size && consecutiveCount !== 0;\n                    if (isFullPathMatch) {\n                        routeHistory.push(route);\n                        return routeHistory;\n                    }\n                    if (isPartialMatch && route.children) {\n                        routeHistory.push(route);\n                        return this._getRoutes(route.children, urlTokens, urlMap, routeHistory);\n                    }\n                }\n            } catch (err) {\n                _didIteratorError3 = true;\n                _iteratorError3 = err;\n            } finally {\n                try {\n                    if (!_iteratorNormalCompletion3 && _iterator3.return) {\n                        _iterator3.return();\n                    }\n                } finally {\n                    if (_didIteratorError3) {\n                        throw _iteratorError3;\n                    }\n                }\n            }\n\n            return [];\n        }\n    }, {\n        key: '_compareTokens',\n        value: function _compareTokens(routeTokens, urlTokens, urlMap) {\n            var seen = 0;\n            var _iteratorNormalCompletion4 = true;\n            var _didIteratorError4 = false;\n            var _iteratorError4 = undefined;\n\n            try {\n                for (var _iterator4 = urlTokens[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n                    var token = _step4.value;\n\n                    if (urlMap.get(token)) {\n                        seen++;\n                    }\n                }\n            } catch (err) {\n                _didIteratorError4 = true;\n                _iteratorError4 = err;\n            } finally {\n                try {\n                    if (!_iteratorNormalCompletion4 && _iterator4.return) {\n                        _iterator4.return();\n                    }\n                } finally {\n                    if (_didIteratorError4) {\n                        throw _iteratorError4;\n                    }\n                }\n            }\n\n            if (seen > 0) {\n                urlTokens = urlTokens.slice(seen, routeTokens.length + 1);\n            }\n            for (var it = 0; it < urlTokens.length; it++) {\n                var route = routeTokens[it];\n                var url = urlTokens[it];\n                if (!urlMap.get(url)) {\n                    if (route === undefined) {\n                        return urlMap;\n                    }\n                    if (route === url) {\n                        urlMap.set(url, true);\n                    }\n                }\n            }\n            return urlMap;\n        }\n    }, {\n        key: '_countConsecutiveTokens',\n        value: function _countConsecutiveTokens(tokenMap) {\n            var count = 0;\n            var isLastTokenAMatch = true;\n            var _iteratorNormalCompletion5 = true;\n            var _didIteratorError5 = false;\n            var _iteratorError5 = undefined;\n\n            try {\n                for (var _iterator5 = tokenMap[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {\n                    var token = _step5.value;\n\n                    if (token[1] && isLastTokenAMatch) {\n                        count++;\n                    } else {\n                        return count;\n                    }\n                }\n            } catch (err) {\n                _didIteratorError5 = true;\n                _iteratorError5 = err;\n            } finally {\n                try {\n                    if (!_iteratorNormalCompletion5 && _iterator5.return) {\n                        _iterator5.return();\n                    }\n                } finally {\n                    if (_didIteratorError5) {\n                        throw _iteratorError5;\n                    }\n                }\n            }\n\n            return count;\n        }\n    }, {\n        key: '_getWindowUrlAndNavigate',\n        value: function _getWindowUrlAndNavigate() {\n            if (this._baseHrefValue) {\n                var location = window.location.pathname;\n                location = location.substring(this._baseHrefValue.length, location.length);\n                return this.navigate(location);\n            }\n            this.navigate(window.location.hash);\n        }\n    }, {\n        key: '_changeBrowserUrl',\n        value: function _changeBrowserUrl(path) {\n            var finalPath = this._getAndAppendBaseHref(path);\n            history.pushState('', path, finalPath);\n        }\n    }, {\n        key: '_getAndAppendBaseHref',\n        value: function _getAndAppendBaseHref(path) {\n            if (path === '/') {\n                path = '';\n            }\n            var baseHref = this._baseHrefValue;\n            if (baseHref && baseHref !== '/') {\n                return baseHref + path;\n            }\n            if (baseHref && baseHref === '/') {\n                return path;\n            }\n            return '#/' + path;\n        }\n    }, {\n        key: '_addTemplatesToDom',\n        value: function _addTemplatesToDom(routes) {\n            var _this2 = this;\n\n            var _loop = function _loop(it) {\n                var outlets = document.getElementsByTagName('router-outlet');\n                if (!outlets[it]) {\n                    console.error('Router: router-outlet missing.');\n                }\n                if (routes[it].template) {\n                    outlets[it].innerHTML = routes[it].template;\n                } else {\n                    _this2._getRemoteTemplate(routes[it].templateUrl).then(function (template) {\n                        outlets[it].innerHTML = template;\n                    }).catch(function (err) {\n                        console.error('Router: Failed to get template.\\n' + err);\n                    });\n                }\n            };\n\n            for (var it = 0; it < routes.length; it++) {\n                _loop(it);\n            }\n        }\n    }, {\n        key: '_getRemoteTemplate',\n        value: function _getRemoteTemplate(url) {\n            return new Promise(function (resolve, reject) {\n                window.fetch(url).then(function (response) {\n                    return response.text();\n                }).then(function (body) {\n                    return resolve(body);\n                }).catch(function (error) {\n                    return reject(error);\n                });\n            });\n        }\n    }, {\n        key: 'routes',\n        get: function get() {\n            return this._routes;\n        }\n    }, {\n        key: '_baseHrefValue',\n        get: function get() {\n            var baseElement = document.getElementsByTagName('base')[0];\n            var baseHref = void 0;\n            if (baseElement) {\n                return baseElement.attributes.getNamedItem('href').value;\n            }\n        }\n    }]);\n\n    return Router;\n}();\n\nexports.default = Router;\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// router.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"D:\\\\Chris\\\\Workspace\\\\alpine\\\\router\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 0afe4a61567abf1d3380","/**\r\n * Interface for route data\r\n */\r\nexport interface Route {\r\n  path: string;\r\n  template?: string;\r\n  templateUrl?: string;\r\n  children?: Route[];\r\n}\r\n\r\n/**\r\n * Client-side router for single page applications\r\n */\r\nexport default class Router {\r\n  private _routes: Route[] = [];\r\n\r\n  constructor(routes: Route[]) {\r\n\r\n    if (Array.isArray(routes)) {\r\n      for (let route of routes) {\r\n        this._routes.push(route);\r\n      }\r\n    } else {\r\n      console.error('Router: Failed to create router.\\nDid you enter an array of objects in the following format [{ path: \"example\", template: \"<h1>Example</h1>\"}]?')\r\n    }\r\n\r\n    this._getWindowUrlAndNavigate();\r\n\r\n    window.onhashchange = () => {\r\n      this._getWindowUrlAndNavigate();\r\n    }\r\n\r\n  }\r\n\r\n  get routes(): Route[] {\r\n    return this._routes;\r\n  }\r\n\r\n  /**\r\n   * Get tokens from a path\r\n   * \r\n   * @param path  Path to get tokens from\r\n   * @returns     List of tokens from path\r\n   */\r\n  getPathTokens(path: string): string[] {\r\n    let tokens = path.split('/');\r\n\r\n    if (tokens[0] === '' && tokens[1] === '') {\r\n      let token = path;\r\n      tokens = [''];\r\n    }\r\n    \r\n    return tokens;\r\n  }\r\n\r\n  /**\r\n   * Sanitize path and remove # and / from the beginning\r\n   * \r\n   * @param path  Path to sanitize\r\n   * @return      Sanitized path\r\n   */\r\n  private sanitizePath(path: string): string {\r\n    if (path.charAt(0) === '#') {\r\n        path = path.slice(1, path.length);\r\n    }\r\n\r\n    if (path.charAt(0) === '/' && path !== '/') {\r\n        path = path.slice(1, path.length);;\r\n    }\r\n\r\n    return path;\r\n   }\r\n\r\n  /**\r\n   * Navigate to new path\r\n   * \r\n   * @param path Path to navigate to.\r\n   * @returns Success of navigation.\r\n   */\r\n  public navigate(url: string): boolean {\r\n\r\n    url = this.sanitizePath(url);\r\n\r\n    // Get url tokens\r\n    let urlTokens = this.getPathTokens(url);\r\n    let urlMap = new Map();\r\n    \r\n    for (let token of urlTokens) {\r\n      urlMap.set(token, false);\r\n    }\r\n\r\n    let result = this._getRoutes(this._routes, urlTokens, urlMap);\r\n\r\n    if (result.length > 0) {\r\n      this._changeBrowserUrl(url);\r\n      this._addTemplatesToDom(result);\r\n      return true;\r\n    } \r\n\r\n    console.error(`Router: No route found for path '${url}'.`)\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Match and return routes\r\n   * \r\n   * @param routes Routes to match\r\n   * @param urlTokens URL Tokens\r\n   * @param urlMap URL Map\r\n   * @param routeHistory Route History\r\n   */\r\n  private _getRoutes(routes: Route[], urlTokens: string[], urlMap: Map<string, boolean>, routeHistory?: Route[]): Route[] {\r\n    routeHistory = routeHistory || [];\r\n\r\n    // iterate through routes\r\n    for (let route of routes) {\r\n      // get route path tokens\r\n      const routeTokens = this.getPathTokens(route.path);\r\n      urlMap = this._compareTokens(routeTokens, urlTokens, urlMap);\r\n      const consecutiveCount = this._countConsecutiveTokens(urlMap);\r\n      const isFullPathMatch = (consecutiveCount === urlMap.size);\r\n      const isPartialMatch = (consecutiveCount < urlMap.size && consecutiveCount !== 0);\r\n\r\n      if (isFullPathMatch) {\r\n        routeHistory.push(route);\r\n        return routeHistory;\r\n      }\r\n\r\n      if (isPartialMatch && route.children) {\r\n        routeHistory.push(route);\r\n        return this._getRoutes(route.children, urlTokens, urlMap, routeHistory);\r\n      }\r\n    }\r\n\r\n    return [];\r\n  }\r\n\r\n  private _compareTokens(routeTokens: string[], urlTokens: string[], urlMap: Map<string, boolean>) {\r\n    // for loop to count number of seen tokens\r\n    let seen = 0;\r\n    for (let token of urlTokens) {\r\n      if (urlMap.get(token)) { seen++;}\r\n    }\r\n\r\n    if (seen > 0) {\r\n      urlTokens = urlTokens.slice(seen, routeTokens.length + 1);\r\n    }\r\n\r\n    // compare route tokens with url tokens\r\n    for (let it = 0; it < urlTokens.length; it++) {\r\n      const route = routeTokens[it];\r\n      const url = urlTokens[it];\r\n\r\n      if (!urlMap.get(url)) {\r\n        if (route === undefined) { return urlMap; }\r\n\r\n        if (route === url) {\r\n          urlMap.set(url, true);\r\n        }\r\n      }\r\n    }\r\n\r\n    return urlMap;\r\n  }\r\n\r\n\r\n  /**\r\n   * Gets consecutive token match count\r\n   * \r\n   * @param tokenMap  Map of tokens\r\n   * @return          Consecutive match count\r\n   */\r\n  private _countConsecutiveTokens(tokenMap: Map<string, boolean>) {\r\n    let count = 0;\r\n    let isLastTokenAMatch = true;\r\n\r\n    for (let token of tokenMap) {\r\n      if (token[1] && isLastTokenAMatch) {\r\n        count++;\r\n      } else {\r\n        return count;\r\n      }\r\n    }\r\n\r\n    return count;\r\n  }\r\n\r\n  /**\r\n   * Gets the current window url and navigate\r\n   */\r\n  private _getWindowUrlAndNavigate() {\r\n    if (this._baseHrefValue) {\r\n      let location = window.location.pathname;\r\n\r\n      location = location.substring(\r\n        this._baseHrefValue.length,\r\n        location.length\r\n      );\r\n\r\n      return this.navigate(location);\r\n    }\r\n\r\n    this.navigate(window.location.hash);\r\n  }\r\n\r\n  /**\r\n   * Changes url in address bar after the domain name\r\n   * \r\n   * @param path  Path to change url to\r\n   */\r\n  private _changeBrowserUrl(path: string) {\r\n    let finalPath = this._getAndAppendBaseHref(path);\r\n    history.pushState('', path, finalPath);\r\n  }\r\n\r\n  /**\r\n   * Gets and appends the base href value if it exists\r\n   * \r\n   * @param url       URL for route\r\n   * @return          modified url adjusted for base tag if it exists\r\n   */\r\n  private _getAndAppendBaseHref(path: string) {\r\n    if (path === '/') { path = '' }\r\n    let baseHref = this._baseHrefValue;\r\n\r\n    if (baseHref && baseHref !== '/') {\r\n      return baseHref + path;\r\n    }\r\n\r\n    if (baseHref && baseHref === '/') {\r\n      return path;\r\n    }\r\n\r\n    return '#/' + path;\r\n  }\r\n\r\n  /**\r\n   * Get value of of the href attribute in the base tag if it exists\r\n   * \r\n   * @returns Value of href attributes\r\n   */\r\n  private get _baseHrefValue(): string {\r\n    let baseElement: HTMLElement = document.getElementsByTagName('base')[0];\r\n    let baseHref: string;\r\n\r\n    if (baseElement) {\r\n      return baseElement\r\n        .attributes\r\n        .getNamedItem('href')\r\n        .value;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get the matched routes and add the templates to the DOM\r\n   * \r\n   * @param routes    Matched routes\r\n   */\r\n  private _addTemplatesToDom(routes: Route[]) {\r\n    for (let it = 0; it < routes.length; it++) {\r\n      const outlets = document.getElementsByTagName('router-outlet');\r\n\r\n      if (!outlets[it]) { console.error('Router: router-outlet missing.')}\r\n\r\n      if (routes[it].template) {\r\n        outlets[it].innerHTML = routes[it].template;\r\n      } else {\r\n        this._getRemoteTemplate(routes[it].templateUrl)\r\n          .then((template: string) => {\r\n            outlets[it].innerHTML = template;\r\n          })\r\n          .catch((err) => {\r\n            console.error(`Router: Failed to get template.\\n${err}`);\r\n          });\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get a remote html file for the template\r\n   * @param url Url for resource\r\n   */\r\n  private _getRemoteTemplate(url: string) {\r\n    return new Promise((resolve, reject) => {\r\n      window.fetch(url)\r\n        .then((response) => response.text())\r\n        .then((body: string) => resolve(body))\r\n        .catch((error: string) => reject(error));\r\n    });\r\n  }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/router.ts"],"sourceRoot":""}